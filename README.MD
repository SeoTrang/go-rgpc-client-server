DÆ°á»›i Ä‘Ã¢y lÃ  hÆ°á»›ng dáº«n chi tiáº¿t cÃ¡ch sá»­ dá»¥ng project gRPC vá»›i Go, Ä‘Æ°á»£c biÃªn soáº¡n thÃ nh file `README.md`:

---

# gRPC Server vÃ  Client trong Go

ÄÃ¢y lÃ  vÃ­ dá»¥ Ä‘Æ¡n giáº£n vá» cÃ¡ch xÃ¢y dá»±ng má»™t gRPC Server vÃ  Client trong Go. Server cung cáº¥p má»™t service tÃªn lÃ  `Greeter` vá»›i má»™t method `SayHello`, vÃ  Client gá»i method nÃ y Ä‘á»ƒ nháº­n pháº£n há»“i.

## Má»¥c Lá»¥c
- [Giá»›i Thiá»‡u](#giá»›i-thiá»‡u)
- [CÃ i Äáº·t CÃ´ng Cá»¥](#cÃ i-Ä‘áº·t-cÃ´ng-cá»¥)
- [Cáº¥u TrÃºc ThÆ° Má»¥c](#cáº¥u-trÃºc-thÆ°-má»¥c)
- [Táº¡o File `greeter.proto`](#táº¡o-file-greeterproto)
- [Generate Code tá»« Proto](#generate-code-tá»«-proto)
- [Táº¡o gRPC Server](#táº¡o-grpc-server)
- [Táº¡o gRPC Client](#táº¡o-grpc-client)
- [Cháº¡y Project](#cháº¡y-project)

---

## Giá»›i Thiá»‡u
Má»¥c tiÃªu cá»§a dá»± Ã¡n nÃ y lÃ  xÃ¢y dá»±ng má»™t gRPC server vÃ  client Ä‘Æ¡n giáº£n:

- **Server**: Táº¡o má»™t service tÃªn `Greeter` vá»›i má»™t method `SayHello`, nháº­n tÃªn ngÆ°á»i dÃ¹ng vÃ  tráº£ vá» má»™t message chÃ o há».
- **Client**: Gá»­i tÃªn ngÆ°á»i dÃ¹ng tá»›i server vÃ  nháº­n pháº£n há»“i vá»›i message chÃ o tá»« server.

---

## CÃ i Äáº·t CÃ´ng Cá»¥

### 1. CÃ i `protoc` (Protocol Buffers Compiler)
TrÆ°á»›c tiÃªn, báº¡n cáº§n cÃ i Ä‘áº·t `protoc` Ä‘á»ƒ biÃªn dá»‹ch cÃ¡c file `.proto`.

- **Mac**: 
  ```bash
  brew install protobuf
  ```
- **Ubuntu**: 
  ```bash
  sudo apt install -y protobuf-compiler
  ```
- **Windows**: 
  CÃ i Ä‘áº·t qua [Chocolatey](https://chocolatey.org) báº±ng lá»‡nh:
  ```bash
  choco install protoc
  ```

### 2. CÃ i plugin Go cho `protoc`
Cháº¡y lá»‡nh dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ cÃ i plugin Go cho `protoc`:
```bash
go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest
```

**LÆ°u Ã½**: Äáº£m báº£o thÆ° má»¥c `$GOPATH/bin` náº±m trong `$PATH`.

---

## Cáº¥u TrÃºc ThÆ° Má»¥c

```
grpc-example/
â”œâ”€â”€ go.mod
â”œâ”€â”€ greeter.proto
â”œâ”€â”€ server/
â”‚   â””â”€â”€ main.go
â”œâ”€â”€ client/
â”‚   â””â”€â”€ main.go
```

---

## Táº¡o File `greeter.proto`

File `greeter.proto` Ä‘á»‹nh nghÄ©a giao diá»‡n cá»§a gRPC service, bao gá»“m method `SayHello`.

```proto
syntax = "proto3";

package greeter;

option go_package = "./greeterpb";

service Greeter {
  rpc SayHello (HelloRequest) returns (HelloResponse);
}

message HelloRequest {
  string name = 1;
}

message HelloResponse {
  string message = 1;
}
```

**Giáº£i thÃ­ch**:
- **service Greeter**: ÄÃ¢y lÃ  dá»‹ch vá»¥ gRPC vá»›i method `SayHello`.
- **message HelloRequest**: Message gá»­i tá»« client, chá»©a tÃªn ngÆ°á»i dÃ¹ng.
- **message HelloResponse**: Message tráº£ vá» tá»« server, chá»©a lá»i chÃ o.

---

## Generate Code tá»« Proto

Sau khi táº¡o file `greeter.proto`, báº¡n cáº§n sá»­ dá»¥ng `protoc` Ä‘á»ƒ sinh mÃ£ Go tá»« file `.proto`:

```bash
protoc --go_out=. --go-grpc_out=. greeter.proto
```

Lá»‡nh trÃªn sáº½ táº¡o ra thÆ° má»¥c `greeterpb/` chá»©a cÃ¡c file Go tá»± Ä‘á»™ng sinh ra tá»« file `greeter.proto`.

---

## Táº¡o gRPC Server

File `server/main.go` triá»ƒn khai server gRPC:

```go
package main

import (
	"context"
	"fmt"
	"log"
	"net"

	"grpc-example/greeterpb"

	"google.golang.org/grpc"
)

type server struct {
	greeterpb.UnimplementedGreeterServer
}

func (s *server) SayHello(ctx context.Context, req *greeterpb.HelloRequest) (*greeterpb.HelloResponse, error) {
	name := req.GetName()
	res := &greeterpb.HelloResponse{
		Message: "Hello " + name,
	}
	return res, nil
}

func main() {
	lis, err := net.Listen("tcp", ":50051")
	if err != nil {
		log.Fatalf("failed to listen: %v", err)
	}

	s := grpc.NewServer()
	greeterpb.RegisterGreeterServer(s, &server{})

	fmt.Println("ğŸš€ Server is running at :50051")
	if err := s.Serve(lis); err != nil {
		log.Fatalf("failed to serve: %v", err)
	}
}
```

**Giáº£i thÃ­ch**:
- Server khá»Ÿi táº¡o láº¯ng nghe á»Ÿ cá»•ng `50051`.
- Khi nháº­n request tá»« client, method `SayHello` sáº½ tráº£ vá» má»™t message chá»©a lá»i chÃ o.

---

## Táº¡o gRPC Client

File `client/main.go` thá»±c hiá»‡n káº¿t ná»‘i tá»›i server vÃ  gá»i method `SayHello`:

```go
package main

import (
	"context"
	"fmt"
	"log"
	"time"

	"grpc-example/greeterpb"

	"google.golang.org/grpc"
)

func main() {
	conn, err := grpc.Dial("localhost:50051", grpc.WithInsecure())
	if err != nil {
		log.Fatalf("âŒ could not connect: %v", err)
	}
	defer conn.Close()

	client := greeterpb.NewGreeterClient(conn)

	ctx, cancel := context.WithTimeout(context.Background(), time.Second)
	defer cancel()

	res, err := client.SayHello(ctx, &greeterpb.HelloRequest{Name: "Go Developer"})
	if err != nil {
		log.Fatalf("âŒ could not greet: %v", err)
	}
	fmt.Println("ğŸ‘‹ Response:", res.GetMessage())
}
```

**Giáº£i thÃ­ch**:
- Client káº¿t ná»‘i tá»›i server gRPC táº¡i `localhost:50051`.
- Client gá»i method `SayHello` vÃ  in ra pháº£n há»“i tá»« server.

---

## Cháº¡y Project

Äá»ƒ cháº¡y project, báº¡n cáº§n má»Ÿ hai terminal:

### Terminal 1: Cháº¡y Server
```bash
go run server/main.go
```

### Terminal 2: Cháº¡y Client
```bash
go run client/main.go
```

Káº¿t quáº£:

```
ğŸ‘‹ Response: Hello Go Developer
```

---

## Giáº£i ThÃ­ch ThÃªm

### Má»™t sá»‘ Ä‘Æ¡n vá»‹ thá»i gian phá»• biáº¿n:
- **ms** (Millisecond): 1 ms = 0.001 giÃ¢y.
- **Âµs** (Microsecond): 1 Âµs = 0.000001 giÃ¢y.
- **ns** (Nanosecond): 1 ns = 0.000000001 giÃ¢y.

Thá»i gian pháº£n há»“i cá»§a gRPC ráº¥t nhanh, chá»‰ khoáº£ng **500Âµs Ä‘áº¿n 700Âµs**, cho tháº¥y gRPC lÃ  má»™t giao thá»©c tá»‘i Æ°u cho viá»‡c xá»­ lÃ½ cÃ¡c yÃªu cáº§u ná»™i bá»™.

---

### So sÃ¡nh gRPC trong Go vÃ  Node.js

- **Node.js** sá»­ dá»¥ng **Dynamic Code Generation** vÃ  **Reflection** Ä‘á»ƒ lÃ m viá»‡c vá»›i cÃ¡c file `.proto` trá»±c tiáº¿p táº¡i runtime. Äiá»u nÃ y giÃºp giáº£m bÆ°á»›c build nhÆ°ng cÃ³ thá»ƒ lÃ m cháº­m hiá»‡u suáº¥t vÃ  khÃ´ng kiá»ƒm tra lá»—i máº¡nh máº½.
- **Go** yÃªu cáº§u **build** cÃ¡c file `.proto` thÃ nh mÃ£ Go trÆ°á»›c khi biÃªn dá»‹ch, giÃºp tá»‘i Æ°u hiá»‡u suáº¥t vÃ  kiá»ƒm tra lá»—i ngay khi biÃªn dá»‹ch.

---